(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47f1a26e"],{1396:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Layout",[a("PageHeader",{attrs:{items:t.items}}),a("div",{staticClass:"animated"},[a("b-card",{staticClass:"mt-10 ml-10 mr-10 mx-auto",attrs:{header:"Create Servicerequest Equipment"}},[a("div",{staticClass:"mt-1"},[a("div",{staticClass:"mx-xl-5"},[a("div",{staticClass:"card-body"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.create(e)}}},[a("b-row",[a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardNameEx"}},[t._v("CONTROL NO")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.controlno,expression:"controlno"}],staticClass:"form-control",attrs:{placeholder:"Enter Contol No",name:"body"},domProps:{value:t.controlno},on:{input:function(e){e.target.composing||(t.controlno=e.target.value)}}})]),a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[t._v("Trip Date")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tripDate,expression:"tripDate"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.tripDate},on:{input:function(e){e.target.composing||(t.tripDate=e.target.value)}}})])],1),a("b-row",[a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[t._v("Dumping Location")]),a("multiselect",{attrs:{multiple:!0,options:t.dumpings},on:{input:t.getdump},model:{value:t.dumpinglocation,callback:function(e){t.dumpinglocation=e},expression:"dumpinglocation"}})],1),a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[t._v("Hauler")]),a("multiselect",{attrs:{multiple:!0,options:t.haulers},on:{input:t.vehiclehauler},model:{value:t.hauler,callback:function(e){t.hauler=e},expression:"hauler"}})],1)],1),a("b-row",[a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[t._v("Equipment")]),a("multiselect",{attrs:{multiple:!0,options:t.equipments},on:{input:t.getequip},model:{value:t.equipment,callback:function(e){t.equipment=e},expression:"equipment"}})],1),a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardNameEx"}},[t._v("Model")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.model,expression:"model"}],staticClass:"form-control",attrs:{name:"trucktype",placeholder:"Enter Model",disabled:"",readonly:""},domProps:{value:t.model},on:{input:function(e){e.target.composing||(t.model=e.target.value)}}})])],1),a("b-row",[a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[t._v("Operator")]),a("multiselect",{attrs:{multiple:!0,options:t.drivers},on:{input:t.getoperatorid},model:{value:t.operator,callback:function(e){t.operator=e},expression:"operator"}})],1),a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[t._v("Job Type")]),a("multiselect",{attrs:{multiple:!0,options:t.jobtypes},model:{value:t.jobtype,callback:function(e){t.jobtype=e},expression:"jobtype"}})],1)],1),a("b-row",{staticClass:"mt-3"},[a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[t._v("From Dumping Point")]),a("multiselect",{attrs:{multiple:!0,options:t.fromdumpings},model:{value:t.fromdumpingpoint,callback:function(e){t.fromdumpingpoint=e},expression:"fromdumpingpoint"}})],1),a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[t._v("To Dumping Point")]),a("multiselect",{attrs:{multiple:!0,options:t.todumpings},model:{value:t.todumpingpoint,callback:function(e){t.todumpingpoint=e},expression:"todumpingpoint"}})],1)],1),a("br"),a("button",{staticClass:"btn btn-custome float-right btn-secondary mb-3",attrs:{type:"submit"}},[t._v("Submit")])],1)])])])])],1)],1)},i=[],o=a("1da1"),s=a("2b0e"),n=a("c2a4"),l=a("444f"),u=a("2579"),p=(a("323e"),a("fea2")),d=a("859b"),c=a("8e5f"),m=a.n(c),h=a("c1df"),g=a.n(h),v=a("6bf2");s["default"].component("multiselect",m.a);var f={page:{title:"Create Servicerequest Equipment",meta:[{name:"description",content:n.description}]},data(){return{inputs:[{name:""}],items:[{text:"Servicerequests",href:"/"},{text:"Servicerequest Trucks",href:"#/Servicerequest/Truck"},{text:"Create SR Equipment",active:!0}],areadata:[],areaarray:"",routedate:[],haulerarray:[],routearray:[],emp:[],dumpid:"",dumpinglocation:"",jobtypes:["JOBTYPE1",,"JOBTYPE2"],controlno:"",tripDate:"",plateno:"",hauler:"",vehicleno:"",fromdumpingpoint:"",todumpingpoint:"",driver:"",helper:"",volumecapacity:"",trucktype:"",body:"",area:"",route:"",driver:"",contractor:"",collector:null,lgu:"",vehicleno:"",plates:[],body:"",vehicledata:[],driverid:"",startTime:"",drivers:[],helpers:[],vehicles:[],servingAreas:[],route:"",driver:"",helperid:"",helper:null,servingRoutes:[],haulerid:"",driverList:[],hauler:"",haulerList:[],contractorList:[],vehicledata:[],paleroList:[],garbage:null,dumpings:[],haulers:[],dumpingdata:[],plates:[],haulerdata:[],fromdumpings:[],todumpings:[],lgu:null,dumpingid:"",haulerid:"",dispatcherid:"",equipmentdata:[],equipments:[],equipment:"",model:"",jobtype:"",operator:"",operatorid:""}},components:{Layout:l["a"],PageHeader:u["a"],VueTimepicker:p["a"],Multiselect:m.a,datetime:d["Datetime"]},computed:{getUserDetails(){return this.$store.getters["auth/loggedInDetails"]}},mounted(){this.tripDate=new Date,this.startTime=g()(new Date).format("DD-MM-YYYY hh:mm A"),console.log(this.tripDate+" "+this.startTime),this.getdumping(),this.gethaulers(),this.getequipment(),this.employeedata(),this.getLgu()},methods:{getLgu(){var t=this;return Object(o["a"])((function*(){const e=JSON.parse(localStorage.getItem("auth.currentUser"));t.dispatcherid=e.user.id,console.log(t.loginDetails)}))()},getdump(){var t=this;return Object(o["a"])((function*(){for(var e=0;e<t.dumpingdata.length;e++)if(t.dumpinglocation[0]===t.dumpingdata[e].dumpingAreaName){t.dumpid=t.dumpingdata[e].id;const r=yield Object(v["rc"])(t.dumpid);var a=r.data.response.result.dumpingPoint;a.map(e=>{t.fromdumpings.push(e.dumpingPointName),t.todumpings.push(e.dumpingPointName)})}}))()},platedetails(){for(var t=0;t<this.vehicledata.length;t++)this.plateno[0]===this.vehicledata[t].plateNo&&(this.vehicleno=this.vehicledata[t].vehicleNo,this.trucktype=this.vehicledata[t].vehicleType.truckType,this.volumecapacity=this.vehicledata[t].volumeCapacity)},gethaulers(){var t=this;return Object(o["a"])((function*(){try{const e=yield Object(v["Bc"])();t.haulerdata=e.data.response.HaulerMaster,t.haulerdata.map(e=>{t.haulers.push(e.haulerName)})}catch(e){}}))()},getdumping(){var t=this;return Object(o["a"])((function*(){try{const e=yield Object(v["Mb"])();t.dumpingdata=e.data.response.dumpingLocation,t.dumpingdata.map(e=>{t.dumpings.push(e.dumpingAreaName)})}catch(e){}}))()},vehiclehauler(){var t=this;return Object(o["a"])((function*(){for(var e=0;e<t.haulerdata.length;e++)if(t.hauler[0]===t.haulerdata[e].haulerName){t.haulerid=t.haulerdata[e].id;const a=yield Object(v["qc"])(t.haulerid);t.vehicledata=a.data.response.result,t.vehicledata.map(e=>{t.plates.push(e.plateNo)})}}))()},getroutes(){this.routedata.map(t=>{this.route===t.routeName&&this.routearray.push(t)})},getareas(){this.areadata.map(t=>{this.area===t.areaName&&(this.areaarray=t)})},getoperatorid(){this.emp.map(t=>{this.operator[0]===t.userName&&(this.operatorid=t.id)})},employeedata(){var t=this;return Object(o["a"])((function*(){try{const e=yield Object(v["zc"])();t.emp=e.data.response.HaulerEmployees,console.log(t.emp),t.emp.map(e=>{"OPERATOR"==e.type&&t.drivers.push(e.userName)})}catch(e){}}))()},areas(){var t=this;return Object(o["a"])((function*(){try{const e=yield Object(v["a"])();t.areadata=e.data.response.areaMaster,t.areadata.map(e=>{null!=e.areaName&&t.servingAreas.push(e.areaName)})}catch(e){console.log(e)}console.log(t.servingAreas)}))()},routes(){var t=this;return Object(o["a"])((function*(){try{const e=yield Object(v["Oc"])();console.log(e),t.routedata=e.data.response.RouteMaster,t.routedata.map(e=>{null!=e.routeName&&t.servingRoutes.push(e.routeName)})}catch(e){}}))()},getRouteObject(t){this.routedata.map(e=>{if(t==e.routeName)return console.log(e),e})},getequipment(){var t=this;return Object(o["a"])((function*(){try{const e=yield Object(v["dc"])();t.equipmentdata=e.data.response.equipment,t.equipmentdata.map(e=>{t.equipments.push(e.equipmentNo)})}catch(e){}}))()},getequip(){this.equipmentdata.map(t=>{this.equipment[0]===t.equipmentNo&&(this.model=t.model)})},getdriverid(){this.emp.map(t=>{this.driver[0]===t.userName&&(this.driverid=t.id)})},gethelperid(){this.emp.map(t=>{this.helper[0]===t.userName&&(this.helperid=t.id)})},create(){var t=this;return Object(o["a"])((function*(){try{let e={controlNo:t.controlno,tripDate:t.tripDate,dumpingareaId:t.dumpid,equipmentNo:t.equipment[0],equipmentmodel:t.model,type:t.jobtype[0],fromPoint:t.fromdumpingpoint[0],toPoint:t.todumpingpoint[0],haulerId:t.haulerid,timeInAM:"",timeOutAM:"",timeInPM:"",timeOutPM:"",aMTrip:"",pMTrip:"",totalTrips:"",driverTimeIn:"",totalDistance:"",verifiedBy:t.operatorid,dispatchedBy:t.dispatcherid};const a=yield Object(v["j"])(e);a&&(t.$swal({group:"alert",type:"success",text:"Service Request Equipment Created",duration:5e3}),t.$router.push({path:"/Servicerequest/Equipment"}))}catch(e){}}))()},getTruckType(){this.vehicles.map(t=>{t.plateNo==this.plate&&(this.trucktype=t.vehicleType.code,this.vehicleno=t.vehicleNo)})},add(t){this.inputs.length<=4&&this.inputs.push({name:""})},remove(t){this.inputs.splice(t,1)}}},b=f,y=(a("60bc"),a("e93f"),a("8329"),a("2877")),x=Object(y["a"])(b,r,i,!1,null,"97c2581c",null);e["default"]=x.exports},2735:function(t,e,a){},8329:function(t,e,a){"use strict";var r=a("a19a"),i=a.n(r);i.a},a19a:function(t,e,a){},e93f:function(t,e,a){"use strict";var r=a("2735"),i=a.n(r);i.a}}]);
//# sourceMappingURL=chunk-47f1a26e.b138acac.js.map