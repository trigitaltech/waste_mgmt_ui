(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-559734c4"],{"02b4":function(e,t,r){"use strict";var i=r("eb33"),a=r.n(i);a.a},c269:function(e,t,r){"use strict";var i=r("e535"),a=r.n(i);a.a},e535:function(e,t,r){},e9c0:function(e,t,r){"use strict";r.r(t);var i,a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Layout",[r("PageHeader",{attrs:{items:e.items}}),r("div",{staticClass:"animated"},[r("b-card",{staticClass:"mt-10 ml-10 mr-10 mx-auto",attrs:{header:"Edit Servicerequest Truck"}},[r("div",{staticClass:"mt-1"},[r("div",{staticClass:"mx-xl-5"},[r("div",{staticClass:"card-body"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.update()}}},[r("b-row",[r("b-col",[r("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardNameEx"}},[e._v("Driver Time IN")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.drivertimein,expression:"drivertimein"}],staticClass:"form-control",attrs:{name:"body",placeholder:"Enter Driver Time In"},domProps:{value:e.drivertimein},on:{input:function(t){t.target.composing||(e.drivertimein=t.target.value)}}})]),r("b-col",[r("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("DISTANCE (KMS)")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.distancekms,expression:"distancekms"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter distancekms"},domProps:{value:e.distancekms},on:{input:function(t){t.target.composing||(e.distancekms=t.target.value)}}})])],1),r("b-row",[r("b-col",[r("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Equipment Used")]),r("multiselect",{attrs:{multiple:!0,options:e.equip},on:{input:e.getequipCode},model:{value:e.equipmentused,callback:function(t){e.equipmentused=t},expression:"equipmentused"}})],1),r("b-col")],1),r("br"),e._l(e.inputs,(function(t,i){return r("b-row",{key:i},[r("b-col",[r("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardNameEx"}},[e._v("\n                    Time In")]),r("datetime",{attrs:{format:{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit"},type:"datetime",placeholder:"SELECT Time"},model:{value:t.timeIn,callback:function(r){e.$set(t,"timeIn",r)},expression:"input.timeIn"}})],1),r("b-col",[r("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardNameEx"}},[e._v("\n                    Time Out")]),r("datetime",{attrs:{format:{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit"},type:"datetime",placeholder:"SELECT Time"},model:{value:t.timeOut,callback:function(r){e.$set(t,"timeOut",r)},expression:"input.timeOut"}})],1),r("b-col",[r("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardNameEx"}},[e._v("\n                    Duration")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.duration,expression:"input.duration"}],staticClass:"form-control",attrs:{id:"defaultFormCardtextEx",type:"text",placeholder:"Enter duration"},domProps:{value:t.duration},on:{input:function(r){r.target.composing||e.$set(t,"duration",r.target.value)}}})]),r("b-col",[r("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardNameEx"}},[e._v("\n                    Buckets Loaded")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.bucketLoaded,expression:"input.bucketLoaded"}],staticClass:"form-control",attrs:{id:"defaultFormCardtextEx",type:"text",placeholder:"Enter bucketsloaded"},domProps:{value:t.bucketLoaded},on:{input:function(r){r.target.composing||e.$set(t,"bucketLoaded",r.target.value)}}})]),r("b-col",[r("span",[r("i",{directives:[{name:"show",rawName:"v-show",value:i||!i&&e.inputs.length>1,expression:"k || (!k && inputs.length > 1)"}],staticClass:"fas fa-minus-circle",on:{click:function(t){return e.remove(i)}}}),r("br"),r("i",{directives:[{name:"show",rawName:"v-show",value:i==e.inputs.length-1,expression:"k == inputs.length - 1"}],staticClass:"fas fa-plus-circle",staticStyle:{width:"50px"},on:{click:function(t){return e.add(i)}}})])])],1)})),r("br"),r("b-row",[r("b-col",[r("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Verified BY")]),r("b-form-select",{staticClass:"form-control",attrs:{options:e.checkerListNames},on:{change:e.getCheckerId},model:{value:e.verifiedby,callback:function(t){e.verifiedby="string"===typeof t?t.trim():t},expression:"verifiedby"}})],1),r("b-col")],1),r("b-row",[r("b-col",[r("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Dispatched BY")]),r("multiselect",{attrs:{multiple:!0,options:e.dispatcherListNames},on:{input:e.getdispatchid},model:{value:e.dispatchedby,callback:function(t){e.dispatchedby=t},expression:"dispatchedby"}})],1),r("b-col")],1),r("br"),r("button",{staticClass:"btn btn-custome float-right btn-secondary mb-3",attrs:{type:"submit"}},[e._v("Submit")])],2)])])])])],1)],1)},s=[],n=(r("96cf"),r("1da1")),c=r("ade3"),u=r("2b0e"),o=r("c2a4"),l=r("444f"),d=r("2579"),m=(r("323e"),r("fea2")),p=r("859b"),h=r("8e5f"),f=r.n(h),v=r("c1df"),b=r.n(v),g=r("6bf2");u["default"].component("multiselect",f.a);var k={page:{title:"Edit Servicerequest Truck",meta:[{name:"description",content:o.description}]},data:function(){var e;return e={inputs:[{name:""}],items:[{text:"Servicerequests",href:"/"},{text:"Servicerequest Trucks",href:"#/Servicerequest/Truck"},{text:"Edit SR Truck",active:!0}],areadata:[],areaarray:"",routedate:[],routearray:[],emp:[],controlno:"",area:"",route:"",driver:"",contractor:"",collector:null,lgu:"",plate:"",plates:[],body:"",tripDate:"",trucktype:"",driverid:"",startTime:"",drivers:[],helpers:[],vehicles:[],servingAreas:[]},Object(c["a"])(e,"route",""),Object(c["a"])(e,"driver",""),Object(c["a"])(e,"helper",null),Object(c["a"])(e,"servingRoutes",[]),Object(c["a"])(e,"driverList",[]),Object(c["a"])(e,"checkerListNames",[]),Object(c["a"])(e,"hauler",""),Object(c["a"])(e,"haulerList",[]),Object(c["a"])(e,"contractorList",[]),Object(c["a"])(e,"paleroList",[]),Object(c["a"])(e,"garbage",null),Object(c["a"])(e,"lgu",null),Object(c["a"])(e,"equip",[]),Object(c["a"])(e,"equipments",[]),Object(c["a"])(e,"equipmentused",""),Object(c["a"])(e,"drivertimein",""),Object(c["a"])(e,"distancekms",""),Object(c["a"])(e,"equipmentarray",[]),Object(c["a"])(e,"verifiedby",""),Object(c["a"])(e,"dispatchedby",""),Object(c["a"])(e,"inputs",[{timeIn:"",timeOut:"",duration:"",bucketLoaded:""}]),Object(c["a"])(e,"loginlguid",""),Object(c["a"])(e,"checkerList",[]),Object(c["a"])(e,"dispatcherListNames",[]),Object(c["a"])(e,"dispatcherlist",[]),Object(c["a"])(e,"dispatchId",""),Object(c["a"])(e,"checkerId",""),e},components:{Layout:l["a"],PageHeader:d["a"],VueTimepicker:m["a"],Multiselect:f.a,datetime:p["Datetime"]},computed:{getUserDetails:function(){return this.$store.getters["auth/loggedInDetails"]}},mounted:function(){this.tripDate=b()(new Date).format("DD-MM-YYYY"),this.drivertimein=new Date,console.log(this.tripDate+" "+this.startTime),this.getLgu(),this.getequipments(),this.getvolume(),this.getvolume1()},methods:(i={getLgu:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=JSON.parse(localStorage.getItem("auth.currentUser")),this.loginlguid=t.lguemployee.lguId,this.dispatcherid=t.user.id,this.dispatchername=t.user.userName;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getvolume:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t="VOLUME_CHECKER",e.next=4,Object(g["yc"])(this.loginlguid,t);case 4:r=e.sent,this.checkerList=r.data.response.result,this.checkerList.map((function(e){i.checkerListNames.push(e.userName)})),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}(),getvolume1:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t="ENCODER",e.next=4,Object(g["yc"])(this.loginlguid,t);case 4:r=e.sent,this.dispatcherlist=r.data.response.result,this.dispatcherlist.map((function(e){i.dispatcherListNames.push(e.userName)})),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}(),add:function(){this.inputs.push({timeIn:"",timeOut:"",duration:"",bucketLoaded:""}),console.log(this.inputs)},remove:function(e){this.inputs.splice(e,1)},getequipments:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(g["ec"])();case 2:t=e.sent,this.equipments=t.data.response.equipment,this.equipments.map((function(e){r.equip.push(e.equipmentNo)}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getequipCode:function(){var e=this;console.log("hai",this.equipmentused),this.equipmentarray=[];for(var t=0;t<this.equipmentused.length;t++)this.equipments.map((function(r){e.equipmentused[t]===r.equipmentNo&&(e.equipmentarray.push({equipment:r.id}),console.log("routedata",e.equipmentarray))}))},getCheckerId:function(){var e=this;this.checkerList.map((function(t){e.verifiedby==t.userName&&(e.checkerId=t.id)}))},getdispatchid:function(){var e=this;this.dispatcherlist.map((function(t){e.dispatchedby==t.userName&&(e.dispatchId=t.id)}))},update:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("second"),e.prev=1,t={serviceRequstEqTruck:this.equipmentarray,serviceTicketTruckReport:this.inputs,totaldistance:this.distancekms,driverTimeIn:this.drivertimein,dispatcherBy:this.dispatchId,verifiedBY:this.checkerId},e.next=5,Object(g["A"])(this.$route.params.id,t);case 5:r=e.sent,r&&(this.$swal({group:"alert",type:"success",text:"Updated Service request Truck",duration:5e3}),this.$router.push({path:"/Servicerequest/Truck"})),e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](1);case 11:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(){return e.apply(this,arguments)}return t}(),getTruckType:function(){var e=this;this.vehicles.map((function(t){t.plateNo==e.plate&&(e.trucktype=t.vehicleType.code,e.body=t.vehicleNo)}))}},Object(c["a"])(i,"add",(function(e){this.inputs.length<=4&&this.inputs.push({name:""})})),Object(c["a"])(i,"remove",(function(e){this.inputs.splice(e,1)})),i)},x=k,y=(r("60bc"),r("02b4"),r("c269"),r("2877")),w=Object(y["a"])(x,a,s,!1,null,"55debc92",null);t["default"]=w.exports},eb33:function(e,t,r){}}]);
//# sourceMappingURL=chunk-559734c4-legacy.bff7f1e8.js.map