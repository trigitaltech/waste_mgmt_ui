(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44c9e2ff"],{"17d8":function(e,t,a){"use strict";var r=a("e45f"),i=a.n(r);i.a},bffd:function(e,t,a){"use strict";var r=a("d4c1"),i=a.n(r);i.a},d4c1:function(e,t,a){},d751:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",[a("PageHeader",{attrs:{items:e.items}}),a("div",{staticClass:"animated"},[a("b-card",{staticClass:"mt-10 ml-10 mr-10 mx-auto",attrs:{header:"Create Servicerequest Truck"}},[a("div",{staticClass:"mt-1"},[a("div",{staticClass:"mx-xl-5"},[a("div",{staticClass:"card-body"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.create(t)}}},[a("b-row",[a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardNameEx"}},[e._v("CONTROL NO")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.controlno,expression:"controlno"}],staticClass:"form-control",attrs:{placeholder:"Enter Contol No",name:"body"},domProps:{value:e.controlno},on:{input:function(t){t.target.composing||(e.controlno=t.target.value)}}})]),a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Trip Date")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.tripDate,expression:"tripDate"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.tripDate},on:{input:function(t){t.target.composing||(e.tripDate=t.target.value)}}})])],1),a("b-row",[a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Dumping Location")]),a("multiselect",{attrs:{multiple:!0,options:e.dumpings},on:{input:e.getdump},model:{value:e.dumpinglocation,callback:function(t){e.dumpinglocation=t},expression:"dumpinglocation"}})],1),a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Hauler")]),a("multiselect",{attrs:{multiple:!0,options:e.haulers},on:{input:e.vehiclehauler},model:{value:e.hauler,callback:function(t){e.hauler=t},expression:"hauler"}})],1)],1),a("b-row",[a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Plate No")]),a("multiselect",{attrs:{multiple:!0,options:e.plates},on:{input:e.platedetails},model:{value:e.plateno,callback:function(t){e.plateno=t},expression:"plateno"}})],1),a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardNameEx"}},[e._v("Truck Type")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.trucktype,expression:"trucktype"}],staticClass:"form-control",attrs:{name:"trucktype",placeholder:"Enter Trucktype",readonly:""},domProps:{value:e.trucktype},on:{input:function(t){t.target.composing||(e.trucktype=t.target.value)}}})])],1),a("b-row",[a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardNameEx"}},[e._v("Vehicle No")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.vehicleno,expression:"vehicleno"}],staticClass:"form-control",attrs:{name:"body",readonly:"",placeholder:"Enter Vehicle No"},domProps:{value:e.vehicleno},on:{input:function(t){t.target.composing||(e.vehicleno=t.target.value)}}})]),a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Volume Capacity")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.volumecapacity,expression:"volumecapacity"}],staticClass:"form-control",attrs:{name:"trucktype",readonly:"",placeholder:"Enter Volume Capacity"},domProps:{value:e.volumecapacity},on:{input:function(t){t.target.composing||(e.volumecapacity=t.target.value)}}})])],1),a("b-row",[a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Driver")]),a("multiselect",{attrs:{multiple:!0,options:e.drivers},on:{input:e.getdriverid},model:{value:e.driver,callback:function(t){e.driver=t},expression:"driver"}})],1),a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Helper")]),a("multiselect",{attrs:{multiple:!0,options:e.helpers},on:{input:e.gethelperid},model:{value:e.helper,callback:function(t){e.helper=t},expression:"helper"}})],1)],1),a("b-row",{staticClass:"mt-3"},[a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("From Dumping Point")]),a("multiselect",{attrs:{multiple:!0,options:e.fromdumpings},model:{value:e.fromdumpingpoint,callback:function(t){e.fromdumpingpoint=t},expression:"fromdumpingpoint"}})],1),a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("To Dumping Point")]),a("multiselect",{attrs:{multiple:!0,options:e.todumpings},model:{value:e.todumpingpoint,callback:function(t){e.todumpingpoint=t},expression:"todumpingpoint"}})],1)],1),a("br"),a("button",{staticClass:"btn btn-custome float-right btn-secondary mb-3",attrs:{type:"submit"}},[e._v("Submit")])],1)])])])])],1)],1)},i=[],o=a("1da1"),l=a("2b0e"),s=a("c2a4"),n=a("444f"),u=a("2579"),c=(a("323e"),a("fea2")),d=a("859b"),p=a("8e5f"),m=a.n(p),h=a("c1df"),v=a.n(h),g=a("6bf2");l["default"].component("multiselect",m.a);var f={page:{title:"Create Servicerequest Truck",meta:[{name:"description",content:s.description}]},data(){return{inputs:[{name:""}],items:[{text:"Servicerequests",href:"/"},{text:"Servicerequest Trucks",href:"#/Servicerequest/Truck"},{text:"Create SR Truck",active:!0}],areadata:[],areaarray:"",routedate:[],haulerarray:[],routearray:[],emp:[],dumpid:"",dumpinglocation:"",controlno:"",tripDate:"",plateno:"",hauler:"",vehicleno:"",fromdumpingpoint:"",todumpingpoint:"",driver:"",helper:"",volumecapacity:"",trucktype:"",body:"",area:"",route:"",driver:"",contractor:"",collector:null,lgu:"",vehicleno:"",plates:[],body:"",vehicledata:[],driverid:"",startTime:"",drivers:[],helpers:[],vehicles:[],servingAreas:[],route:"",driver:"",helperid:"",helper:null,servingRoutes:[],haulerid:"",driverList:[],hauler:"",haulerList:[],contractorList:[],vehicledata:[],paleroList:[],garbage:null,dumpings:[],haulers:[],dumpingdata:[],plates:[],haulerdata:[],fromdumpings:[],todumpings:[],lgu:null,dumpingid:"",haulerid:"",dispatcherid:""}},components:{Layout:n["a"],PageHeader:u["a"],VueTimepicker:c["a"],Multiselect:m.a,datetime:d["Datetime"]},computed:{getUserDetails(){return this.$store.getters["auth/loggedInDetails"]}},mounted(){this.tripDate=new Date,this.startTime=v()(new Date).format("DD-MM-YYYY hh:mm A"),console.log(this.tripDate+" "+this.startTime),this.getdumping(),this.gethaulers(),this.employeedata(),this.getLgu()},methods:{getLgu(){var e=this;return Object(o["a"])((function*(){const t=JSON.parse(localStorage.getItem("auth.currentUser"));e.dispatcherid=t.user.id,console.log(e.loginDetails)}))()},getdump(){var e=this;return Object(o["a"])((function*(){for(var t=0;t<e.dumpingdata.length;t++)if(e.dumpinglocation[0]===e.dumpingdata[t].dumpingAreaName){e.dumpid=e.dumpingdata[t].id;const r=yield Object(g["rc"])(e.dumpid);var a=r.data.response.result.dumpingPoint;a.map(t=>{e.fromdumpings.push(t.dumpingPointName),e.todumpings.push(t.dumpingPointName)})}}))()},platedetails(){for(var e=0;e<this.vehicledata.length;e++)this.plateno[0]===this.vehicledata[e].plateNo&&(this.vehicleno=this.vehicledata[e].vehicleNo,this.trucktype=this.vehicledata[e].vehicleType.truckType,this.volumecapacity=this.vehicledata[e].volumeCapacity)},gethaulers(){var e=this;return Object(o["a"])((function*(){try{const t=yield Object(g["Bc"])();e.haulerdata=t.data.response.HaulerMaster,e.haulerdata.map(t=>{e.haulers.push(t.haulerName)})}catch(t){}}))()},getdumping(){var e=this;return Object(o["a"])((function*(){try{const t=yield Object(g["Mb"])();e.dumpingdata=t.data.response.dumpingLocation,e.dumpingdata.map(t=>{e.dumpings.push(t.dumpingAreaName)})}catch(t){}}))()},vehiclehauler(){var e=this;return Object(o["a"])((function*(){for(var t=0;t<e.haulerdata.length;t++)if(e.hauler[0]===e.haulerdata[t].haulerName){e.haulerid=e.haulerdata[t].id;const a=yield Object(g["qc"])(e.haulerid);e.vehicledata=a.data.response.result,e.vehicledata.map(t=>{e.plates.push(t.plateNo)})}}))()},getroutes(){this.routedata.map(e=>{this.route===e.routeName&&this.routearray.push(e)})},getareas(){this.areadata.map(e=>{this.area===e.areaName&&(this.areaarray=e)})},employeedata(){var e=this;return Object(o["a"])((function*(){try{const t=yield Object(g["zc"])();e.emp=t.data.response.HaulerEmployees,console.log(e.emp),e.emp.map(t=>{"DRIVER"==t.type&&e.drivers.push(t.userName),"HELPER"==t.type&&e.helpers.push(t.userName)})}catch(t){}}))()},areas(){var e=this;return Object(o["a"])((function*(){try{const t=yield Object(g["a"])();e.areadata=t.data.response.areaMaster,e.areadata.map(t=>{null!=t.areaName&&e.servingAreas.push(t.areaName)})}catch(t){console.log(t)}console.log(e.servingAreas)}))()},routes(){var e=this;return Object(o["a"])((function*(){try{const t=yield Object(g["Oc"])();console.log(t),e.routedata=t.data.response.RouteMaster,e.routedata.map(t=>{null!=t.routeName&&e.servingRoutes.push(t.routeName)})}catch(t){}}))()},getRouteObject(e){this.routedata.map(t=>{if(e==t.routeName)return console.log(t),t})},getdriverid(){this.emp.map(e=>{this.driver[0]===e.userName&&(this.driverid=e.id)})},gethelperid(){this.emp.map(e=>{this.helper[0]===e.userName&&(this.helperid=e.id)})},create(){var e=this;return Object(o["a"])((function*(){try{let t={controlNo:e.controlno,tripDate:e.tripDate,dumpingareaId:e.dumpid,plateNo:e.plateno[0],bodyNo:e.vehicleno[0],truckType:e.trucktype,driverId:e.driverid,driverName:e.driver[0],helperId:e.helperid,helperName:e.helper[0],fromPoint:e.fromdumpingpoint[0],toPoint:e.todumpingpoint[0],volumeCapacity:e.volumecapacity,haulerId:e.haulerid,timeInAM:"",timeOutAM:"",timeInPM:"",timeOutPM:"",aMTrip:"",pMTrip:"",totalTrips:"",driverTimeIn:"",totalDistance:"",dispatchedBy:e.dispatcherid};const a=yield Object(g["k"])(t);a&&(e.$swal({group:"alert",type:"success",text:"Service Request Truck Created",duration:5e3}),e.$router.push({path:"/Servicerequest/Truck"}))}catch(t){}}))()},getTruckType(){this.vehicles.map(e=>{e.plateNo==this.plate&&(this.trucktype=e.vehicleType.code,this.vehicleno=e.vehicleNo)})},add(e){this.inputs.length<=4&&this.inputs.push({name:""})},remove(e){this.inputs.splice(e,1)}}},b=f,y=(a("60bc"),a("17d8"),a("bffd"),a("2877")),x=Object(y["a"])(b,r,i,!1,null,"1332ad83",null);t["default"]=x.exports},e45f:function(e,t,a){}}]);
//# sourceMappingURL=chunk-44c9e2ff.66313f84.js.map