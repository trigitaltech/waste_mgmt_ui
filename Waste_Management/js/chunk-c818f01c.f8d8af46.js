(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c818f01c"],{"383d":function(e,t,a){"use strict";var r=a("4eeb"),o=a.n(r);o.a},"39f6":function(e,t,a){},"4eeb":function(e,t,a){},9390:function(e,t,a){"use strict";var r=a("39f6"),o=a.n(r);o.a},9800:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",[a("div",{staticClass:"animated"},[a("b-card",{staticClass:"mt-10 ml-10 mr-10 mx-auto",attrs:{header:"Create Outgoing Trip"}},[a("div",{staticClass:"mt-1"},[a("div",{staticClass:"mx-xl-5"},[a("div",{staticClass:"card-body"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.create(t)}}},[a("b-row",[a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("LGU Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.loginDetails.name,expression:"loginDetails.name"}],staticClass:"form-control",attrs:{readonly:""},domProps:{value:e.loginDetails.name},on:{input:function(t){t.target.composing||e.$set(e.loginDetails,"name",t.target.value)}}})]),a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardNameEx"}},[e._v("CONTROL NO")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.controlno,expression:"controlno"}],staticClass:"form-control",attrs:{name:"body"},domProps:{value:e.controlno},on:{input:function(t){t.target.composing||(e.controlno=t.target.value)}}})])],1),a("b-row",{staticClass:"mt-3"},[a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Staging Area")]),a("b-form-select",{staticClass:"form-control",attrs:{options:e.stagingAreaNames},on:{change:e.getDumpingLocation},model:{value:e.staging,callback:function(t){e.staging="string"===typeof t?t.trim():t},expression:"staging"}})],1),a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Dumping Location")]),a("b-form-select",{attrs:{options:e.dumpingLocations},model:{value:e.dumping,callback:function(t){e.dumping=t},expression:"dumping"}})],1)],1),a("b-row",{staticClass:"mt-3"},[a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Trip Date")]),a("datetime",{attrs:{format:{year:"numeric",month:"numeric",day:"numeric"},type:"date",placeholder:"SELECT Date"},model:{value:e.tripDate,callback:function(t){e.tripDate=t},expression:"tripDate"}})],1),a("b-col",{staticClass:"ml-3"},[a("label",{staticClass:"grey-text font-weight-dark mr-2",attrs:{for:"defaultFormCardtextEx"}},[e._v("Loading Time")]),a("datetime",{attrs:{format:{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit"},type:"datetime",placeholder:"SELECT Time"},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}})],1)],1),a("b-row",{staticClass:"mt-3"},[a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardNameEx"}},[e._v("Volume Checker")]),a("b-form-select",{staticClass:"form-control",attrs:{options:e.checkerListNames},model:{value:e.checker,callback:function(t){e.checker=t},expression:"checker"}})],1),a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Control Checker")]),a("b-form-select",{staticClass:"form-control",attrs:{options:e.controlListNames},model:{value:e.control,callback:function(t){e.control="string"===typeof t?t.trim():t},expression:"control"}})],1)],1),a("b-row",{staticClass:"mt-3"},[a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardNameEx"}},[e._v("Hauler")]),a("b-form-select",{staticClass:"form-control",attrs:{options:e.haulerListNames},on:{change:e.getVehiclesDriversHelpers},model:{value:e.hauler,callback:function(t){e.hauler=t},expression:"hauler"}})],1),a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Plate No")]),a("b-form-select",{staticClass:"form-control",attrs:{options:e.plates},on:{change:e.getTruckType},model:{value:e.plate,callback:function(t){e.plate=t},expression:"plate"}})],1)],1),a("b-row",{staticClass:"mt-3"},[a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardNameEx"}},[e._v("Body")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.body,expression:"body"}],staticClass:"form-control",attrs:{name:"body"},domProps:{value:e.body},on:{input:function(t){t.target.composing||(e.body=t.target.value)}}})]),a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardNameEx"}},[e._v("Truck Type")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.trucktype,expression:"trucktype"}],staticClass:"form-control",attrs:{name:"trucktype",readonly:""},domProps:{value:e.trucktype},on:{input:function(t){t.target.composing||(e.trucktype=t.target.value)}}})])],1),a("b-row",{staticClass:"mt-3"},[a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Driver Name")]),a("b-form-select",{staticClass:"form-control",attrs:{options:e.driverNames},model:{value:e.driver,callback:function(t){e.driver="string"===typeof t?t.trim():t},expression:"driver"}})],1),a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Helper")]),a("b-form-select",{staticClass:"form-control",attrs:{options:e.helperNames},model:{value:e.helper,callback:function(t){e.helper="string"===typeof t?t.trim():t},expression:"helper"}})],1)],1),a("button",{staticClass:"btn btn-custome float-right btn-secondary mt-3 mr-2"},[e._v("Submit")])],1)])])])])],1)])},o=[],s=a("1da1"),l=a("2b0e"),i=a("c2a4"),n=a("444f"),c=a("2579"),u=(a("323e"),a("fea2")),m=a("859b"),d=a("8e5f"),g=a.n(d),p=a("6bf2");l["default"].component("multiselect",g.a);var h={page:{title:"Trip Incoming Details",meta:[{name:"description",content:i.description}]},data(){return{controlno:"",area:"",route:"",driver:"",contractor:"",collector:null,lgu:"",plate:"",plates:[],body:"",tripDate:"",trucktype:"",startTime:"",drivers:[],driverNames:[],helperNames:[],helpers:[],vehicles:[],servingAreas:[],route:"",driver:"",helper:null,servingRoutes:[],driverList:[],contractorList:[],garbage:null,lgu:null,loginDetails:{name:""},loginlguid:null,staging:"",stagingAreas:[],stagingAreaNames:[],dumping:"",dumpings:[],dumpingLocations:[],lguEmployees:[],checker:"",checkerList:[],checkerListNames:[],control:"",controlList:[],controlListNames:[],hauler:"",haulerList:[],haulerListNames:[],haulerId:"",driverId:"",helperId:"",stagingAreaId:"",volumeCheckerId:"",contractorDispatcherId:"",controlCheckerId:"",dumpingLocationId:"",contractorDispatcherName:"",contractorDispatcherId:""}},components:{Layout:n["a"],PageHeader:c["a"],VueTimepicker:u["a"],Multiselect:g.a,datetime:m["Datetime"]},mounted(){this.getLgu(),this.getStagingArea(),this.getLguEmployee(),this.getHaulers()},methods:{getLgu(){var e=this;return Object(s["a"])((function*(){const t=JSON.parse(localStorage.getItem("auth.currentUser"));e.loginlguid=t.lguemployee.lguId,e.contractorDispatcherId=t.lguemployee.id,e.contractorDispatcherName=t.lguemployee.userName;const a=yield Object(p["lc"])(e.loginlguid);e.loginDetails.name=a.data.response.result.lguName}))()},getStagingArea(){var e=this;return Object(s["a"])((function*(){try{const t=yield Object(p["Tc"])();e.stagingAreas=t.data.response.stagingArea,console.log(e.stagingAreas),e.stagingAreas.map(t=>{console.log(e.loginlguid+" "+t.lguName.id),e.loginlguid==t.lguName.id&&e.stagingAreaNames.push(t.stagingAreaName)}),console.log(e.loginDetails.name)}catch(t){console.log(t)}}))()},getLguEmployee(){var e=this;return Object(s["a"])((function*(){try{const t=yield Object(p["Ec"])();e.lguEmployees=t.data.response.result,e.lguEmployees.map(t=>{console.log(t.lguId+" "+e.loginlguid),console.log(t.type),"VOLUME_CHECKER"==t.type&&t.lguId==e.loginlguid&&(e.checkerList.push(t),e.checkerListNames.push(t.userName)),"CONTROL_CHECKER"==t.type&&t.lguId==e.loginlguid&&(e.controlList.push(t),e.controlListNames.push(t.userName))})}catch(t){console.log(t)}}))()},getHaulers(){var e=this;return Object(s["a"])((function*(){try{const t=yield Object(p["Bc"])();e.haulerList=t.data.response.HaulerMaster,e.haulerList.map(t=>{e.haulerListNames.push(t.userName)})}catch(t){console.log(t)}}))()},getVehiclesDriversHelpers(){var e=this;return Object(s["a"])((function*(){try{e.haulerList.map(t=>{t.userName==e.hauler&&(e.haulerId=t.id)});const t=yield Object(p["pc"])(e.haulerId);e.vehicles=t.data.response.result,e.vehicles.map(t=>{e.plates.push(t.plateNo)});const a=yield Object(p["zc"])(),r=a.data.response.HaulerEmployees;r.map(t=>{"DRIVER"==t.type&&t.haulerId==e.haulerId&&(e.drivers.push(t),e.driverNames.push(t.userName)),"HELPER"==t.type&&t.haulerId==e.haulerId&&(e.helpers.push(t),e.helperNames.push(t.userName))})}catch(t){console.log(t)}}))()},getTruckType(){this.vehicles.map(e=>{this.plate==e.plateNo&&(this.trucktype=e.vehicleType.truckType,this.body=e.vehicleNo)})},getDumpingLocation(){this.stagingAreas.map(e=>{e.stagingAreaName==this.staging&&(this.dumpings.push(e),this.dumpingLocations.push(e.dumpingArea.dumpingAreaName),this.dumping=e.dumpingArea.dumpingAreaName)})},create(){var e=this;return Object(s["a"])((function*(){try{e.dumpings.map(t=>{e.dumping==t.dumpingArea.dumpingAreaName&&(e.dumpingLocationId=t.id)}),e.drivers.map(t=>{e.driver==t.userName&&(e.driverId=t.id)}),e.helpers.map(t=>{e.helper==t.userName&&(e.helperId=t.id)}),e.stagingAreas.map(t=>{e.staging==t.stagingAreaName&&(e.stagingAreaId=t.id)}),e.checkerList.map(t=>{e.checker==t.userName&&(e.volumeCheckerId=t.id)}),e.controlList.map(t=>{e.control==t.userName&&(e.controlCheckerId=t.id)});const t={controlNo:e.controlno,tripDate:e.tripDate,bodyNo:e.body,plateNo:e.plate,typeOfUnit:e.trucktype,lguId:e.loginlguid,haulerId:e.haulerId,loadingStartTime:e.startTime,driverId:e.driverId,driverName:e.driver,helperName:e.helper,helperId:e.helperId,stagingAreaName:e.staging,stagingAreaId:e.stagingAreaId,volumeCheckerName:e.checker,volumeCheckerId:e.volumeCheckerId,contractorDispatcherName:e.contractorDispatcherName,contractorDispatcherId:e.contractorDispatcherId,contractorDispatcherVerified:1,controlCheckerName:e.control,controlCheckerId:e.controlCheckerId,dumpingLocationId:e.dumpingLocationId,dumpingLocationName:e.dumping},a=yield Object(p["g"])(t);a&&(e.$swal({group:"alert",type:"success",text:"Trip Created Successfully",duration:5e3}),e.$router.push({path:"/Encoder"}))}catch(t){console.log(t)}}))()}}},f=h,v=(a("60bc"),a("383d"),a("9390"),a("2877")),b=Object(v["a"])(f,r,o,!1,null,"1308017b",null);t["default"]=b.exports}}]);
//# sourceMappingURL=chunk-c818f01c.f8d8af46.js.map