(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ee935a0e"],{1694:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Layout",[r("PageHeader",{attrs:{items:e.items}}),r("div",{staticClass:"animated"},[r("b-card",{staticClass:"mt-10 ml-10 mr-10 mx-auto",attrs:{header:"Edit Servicerequest Equipment"}},[r("div",{staticClass:"mt-1"},[r("div",{staticClass:"mx-xl-5"},[r("div",{staticClass:"card-body"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.create(t)}}},[r("b-row",[r("b-col",[r("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardNameEx"}},[e._v("CONTROL NO")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.controlno,expression:"controlno"}],staticClass:"form-control",attrs:{name:"body",placeholder:"Enter Contol No"},domProps:{value:e.controlno},on:{input:function(t){t.target.composing||(e.controlno=t.target.value)}}})]),r("b-col",[r("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Trip Date")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.tripDate,expression:"tripDate"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.tripDate},on:{input:function(t){t.target.composing||(e.tripDate=t.target.value)}}})])],1),r("b-row",[r("b-col",[r("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Dumping Location")]),r("multiselect",{attrs:{multiple:!0,options:e.servingRoutes},model:{value:e.route,callback:function(t){e.route=t},expression:"route"}})],1),r("b-col",[r("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Hauler")]),r("multiselect",{attrs:{multiple:!0,options:e.servingRoutes},model:{value:e.route,callback:function(t){e.route=t},expression:"route"}})],1)],1),r("b-row",[r("b-col",[r("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Equipment No")]),r("multiselect",{attrs:{multiple:!0,options:e.servingRoutes},model:{value:e.route,callback:function(t){e.route=t},expression:"route"}})],1),r("b-col",[r("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardNameEx"}},[e._v("Model")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.trucktype,expression:"trucktype"}],staticClass:"form-control",attrs:{name:"trucktype",readonly:"",placeholder:"Enter Model"},domProps:{value:e.trucktype},on:{input:function(t){t.target.composing||(e.trucktype=t.target.value)}}})])],1),r("b-row",{staticClass:"mt-3"},[r("b-col",[r("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Operator")]),r("multiselect",{attrs:{multiple:!0,options:e.servingRoutes},model:{value:e.route,callback:function(t){e.route=t},expression:"route"}})],1),r("b-col",[r("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Job Type")]),r("multiselect",{attrs:{multiple:!0,options:e.servingRoutes},model:{value:e.route,callback:function(t){e.route=t},expression:"route"}})],1)],1),r("br"),r("button",{staticClass:"btn btn-custome float-right btn-secondary mb-3",attrs:{type:"submit"}},[e._v("Submit")])],1)])])])])],1)],1)},o=[],s=r("1da1"),i=r("2b0e"),l=r("c2a4"),n=r("444f"),u=r("2579"),c=(r("323e"),r("fea2")),d=r("859b"),m=r("8e5f"),p=r.n(m),h=r("c1df"),v=r.n(h),g=r("6bf2");i["default"].component("multiselect",p.a);var f={page:{title:"Edit Servicerequest Equipment",meta:[{name:"description",content:l.description}]},data(){return{inputs:[{name:""}],items:[{text:"Servicerequests",href:"/"},{text:"Servicerequest Trucks",href:"#/Servicerequest/Equipment"},{text:"Edit SR Equipment",active:!0}],areadata:[],areaarray:"",routedate:[],routearray:[],emp:[],controlno:"",area:"",route:"",driver:"",contractor:"",collector:null,lgu:"",plate:"",plates:[],body:"",tripDate:"",trucktype:"",driverid:"",startTime:"",drivers:[],helpers:[],vehicles:[],servingAreas:[],route:"",driver:"",helper:null,servingRoutes:[],driverList:[],hauler:"",haulerList:[],contractorList:[],paleroList:[],garbage:null,lgu:null}},components:{Layout:n["a"],PageHeader:u["a"],VueTimepicker:c["a"],Multiselect:p.a,datetime:d["Datetime"]},computed:{getUserDetails(){return this.$store.getters["auth/loggedInDetails"]}},mounted(){this.tripDate=v()(new Date).format("DD-MM-YYYY"),this.startTime=v()(new Date).format("DD-MM-YYYY hh:mm A"),console.log(this.tripDate+" "+this.startTime),this.areas(),this.routes(),this.getUsers(),this.employeedata(),this.getvehicles()},methods:{getRoutes(){var e=this;return Object(s["a"])((function*(){try{e.areadata.map(function(){var t=Object(s["a"])((function*(t){if(e.area===t.areaName){console.log(t),e.areaarray=t;const r=yield Object(g["mc"])(t.id);console.log(r)}}));return function(e){return t.apply(this,arguments)}}());const t=yield Object(g["mc"])(id);console.log(t)}catch(t){console.log(t)}}))()},getvehicles(){var e=this;return Object(s["a"])((function*(){const t=yield Object(g["Xc"])();e.vehicles=t.data.response.vehicles,e.vehicles.map(t=>{e.plates.push(t.plateNo)}),console.log(e.plates)}))()},getroutes(){this.routedata.map(e=>{this.route===e.routeName&&this.routearray.push(e)})},getareas(){this.areadata.map(e=>{this.area===e.areaName&&(this.areaarray=e)})},getid(){console.log("haiiiiii"),this.emp.map(e=>{this.driver===e.userName&&(this.driverid=e.id)})},employeedata(){var e=this;return Object(s["a"])((function*(){try{const t=yield Object(g["cc"])();e.emp=t.data.response.result,console.log(e.emp),e.emp.map(t=>{"DRIVER"==t.type&&e.drivers.push(t.userName),"HELPER"==t.type&&e.helpers.push(t.userName)})}catch(t){}}))()},areas(){var e=this;return Object(s["a"])((function*(){try{const t=yield Object(g["a"])();e.areadata=t.data.response.areaMaster,e.areadata.map(t=>{null!=t.areaName&&e.servingAreas.push(t.areaName)})}catch(t){console.log(t)}console.log(e.servingAreas)}))()},routes(){var e=this;return Object(s["a"])((function*(){try{const t=yield Object(g["Oc"])();console.log(t),e.routedata=t.data.response.RouteMaster,e.routedata.map(t=>{null!=t.routeName&&e.servingRoutes.push(t.routeName)})}catch(t){}}))()},getRouteObject(e){this.routedata.map(t=>{if(e==t.routeName)return console.log(t),t})},create(){var e=this;return Object(s["a"])((function*(){try{const t=v()(e.startTime).format("YYYY-MM-DDThh:mm:SS+00:00");console.log(t);const r=Object.assign({},r,e.areaarray);let a={controlNo:e.controlno,tripDate:e.tripDate,lgu:e.lgu,bodyNo:e.body,plateNo:e.plate,truckType:e.trucktype,collectionStartTime:e.startTime,servingArea:r,servingRoute:{id:e.routearray.id,code:e.routearray.code,routeName:e.routearray.routeName,routeType:e.routearray.routeType,supervisor:e.routearray.supervisor,route_distance:e.routearray.route_distance,areaId:e.routearray.areaId,areaName:e.areaarray.areaName,isDeleted:!1,routeRoads:[],createdDate:e.routearray.createdDate,createdBy:"",modifiedDate:e.routearray.modifiedDate,modifiedBy:"",description:e.routearray.description},helperId:199,helperName:null,driverId:e.driverid,driverName:e.driver,contractorDispatcherName:null,contractorDispatcherId:null,contractorDispatcherVerified:null,volumeCheckerName:null,volumeCheckerId:null,volumeCheckerVerified:null,volumeCheckerMeasuredVolume:null,volumeCheckerTotalKmServed:null,isDeleted:!1,status:"INITIATED",createdBy:e.getUserDetails.user.username,createdDate:e.tripDate,modifiedBy:e.getUserDetails.user.username,modifiedDate:e.tripDate};const o=yield a;o&&(e.$swal({group:"alert",type:"success",text:"Incoming Trip Created",duration:5e3}),e.$router.push({path:"/Trips/IncomingTrips"}))}catch(t){}}))()},getTruckType(){this.vehicles.map(e=>{e.plateNo==this.plate&&(this.trucktype=e.vehicleType.code,this.body=e.vehicleNo)})},add(e){this.inputs.length<=4&&this.inputs.push({name:""})},remove(e){this.inputs.splice(e,1)}}},y=f,b=(r("60bc"),r("c6c1"),r("4a69"),r("2877")),D=Object(b["a"])(y,a,o,!1,null,"92bdc12c",null);t["default"]=D.exports},"4a69":function(e,t,r){"use strict";var a=r("e020"),o=r.n(a);o.a},5253:function(e,t,r){},c6c1:function(e,t,r){"use strict";var a=r("5253"),o=r.n(a);o.a},e020:function(e,t,r){}}]);
//# sourceMappingURL=chunk-ee935a0e.8cd72a03.js.map