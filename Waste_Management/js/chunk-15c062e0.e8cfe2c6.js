(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15c062e0"],{"0904":function(e,t,a){"use strict";var r=a("d1cf"),l=a.n(r);l.a},5125:function(e,t,a){"use strict";var r=a("d9ed"),l=a.n(r);l.a},d1cf:function(e,t,a){},d9ed:function(e,t,a){},f280:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",[a("PageHeader",{attrs:{items:e.items}}),a("div",{staticClass:"animated fadeIn"},[a("b-card",{staticClass:"mt-10 ml-10 mr-10 mx-auto",attrs:{header:"Settlement"}},[a("b-col",{attrs:{md:"12"}},[a("b-button",{staticClass:"btn btn-custome float-right btn-secondary mb-3",attrs:{text:"Create Tenant"},on:{click:function(t){return e.$router.push({path:"/create"})}}},[e._v("Create Settlement")])],1),a("div",{staticClass:"mt-3"},[a("b-table",{ref:"roles",staticClass:"mt-3",attrs:{id:"my-table",dark:e.dark,hover:e.hover,striped:e.striped,bordered:e.bordered,filter:e.filter,responsive:!0,"current-page":e.currentPage,"per-page":e.perPage,"thead-class":"header",small:e.small,fixed:e.fixed,fields:e.SettlementColumns,items:e.item},scopedSlots:e._u([{key:"actions",fn:function(t){return[a("span",{staticClass:"mr-2",on:{click:function(a){return e.editSettlement(t)}}},[a("i",{staticClass:"fas fa-pencil-alt edit"})]),a("span",{on:{click:function(a){return e.deleteSettlement(t)}}},[a("i",{staticClass:"fa fa-times edit"})])]}},{key:"row-details",fn:function(t){return[a("b-card",{staticClass:"role-details"},[a("div",[a("multiselect",{attrs:{id:t.item._id,value:e.SettlementMap[t.item._id],options:e.allSettlement,label:"Settlement","track-by":"Settlement",multiple:!0},on:{select:function(a,r){return e.addSettlementToRole(a,r,t)}}})],1)])]}}])}),a("b-modal",{attrs:{id:"roleModal"},model:{value:e.SettlementModal,callback:function(t){e.SettlementModal=t},expression:"SettlementModal"}},[a("div",{attrs:{slot:"modal-header"},slot:"modal-header"},[e._v(e._s(e.header))]),a("div",[a("b-input",{model:{value:e.Settlement,callback:function(t){e.Settlement=t},expression:"Settlement"}}),a("b-input",{staticClass:"mt-2",model:{value:e.Settlement,callback:function(t){e.Settlement=t},expression:"Settlement"}}),a("multiselect",{staticClass:"perm_input",attrs:{options:e.methods,placeholder:"Select a Method",label:"value","track-by":"value",multiple:!1},model:{value:e.Settlement,callback:function(t){e.Settlement=t},expression:"Settlement"}})],1),a("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("b-button",{attrs:{variant:"primary"},on:{click:e.handleEdit}},[e._v("Submit")]),a("b-button",{staticClass:"ml-2",attrs:{variant:"secondary"},on:{click:e.clearModal}},[e._v("Cancel")])],1)]),a("div",{staticStyle:{float:"right"}},[a("b-pagination",{attrs:{"per-page":e.perPage,"total-rows":e.Settlement,"aria-controls":"my-table","hide-goto-end-buttons":""},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)],1)],1)],1)},l=[],n=a("1da1"),o=a("c2a4"),s=a("444f"),i=a("2579"),c=a("8e5f"),d=a.n(c),m=a("b410"),u=a("039f"),f=a("6bf2"),p={page:{title:"Settlement",meta:[{name:"description",content:o.description}]},components:{Layout:s["a"],PageHeader:i["a"],Multiselect:d.a,ValidationProvider:u["ValidationProvider"],ValidationObserver:u["ValidationObserver"],ModelSelect:m["ModelSelect"]},data(){return{plandata:"",striped:!1,bordered:!0,filter:"",perPage:10,hover:!0,currentPage:1,small:!1,dark:!1,fixed:!1,amount:"",submitted:!1,title:"Register",item:{key:"resource",value:"Frozen Yogurt",name:"159"},SettlementColumns:[{key:"resource",label:"Resource"},{key:"name",label:"Settlement"},{key:"actions",sortable:!0}],items:[{text:"Home",href:"/"},{text:"Settlement",active:!0}],finalModel:{},selected:null,clientId:"",options:["DAF"],item:{value:"",text:""},form:{personalTitle:"",firstName:"",middleName:"",lastName:"",gender:"",email:"",number:"",address:"",Settlement:"",state:"",country:"",postCode:"",stbNumber:"",bouquets:null,amount:0,voucherNo:""},titles:["Mr.","Sri.","Mrs"],vouchernumber:"",genderOpt:["Male","Female","Other"],SettlementOpt:[],bouquetsOpt:[{value:null,text:"Please select an option"},"FTA  AND STARTER"],clientTemplete:{}}},computed:{getUserDetails(){return this.$store.getters["auth/loggedInDetails"]}},mounted(){this.getClientDetails(),this.getplans()},methods:{makeredeem(){var e=this;return Object(n["a"])((function*(){try{const t={pinNumber:e.vouchernumber,clientId:e.clientId};let a=yield Object(f["Kc"])(t);a&&(e.$swal({group:"alert",type:"success",text:"Your Redeemption Done Successfully",duration:5e3}),e.refresh())}catch(t){e.$toasted.error(t.message.errors[0].developerMessage,{duration:7e3})}}))()},myFunction(){var e=this;return Object(n["a"])((function*(){if(18===e.vouchernumber.length){const a=yield Object(f["Pc"])(e.vouchernumber);var t=a.data;console.log(t),t<5?(e.$notify({group:"alert",type:"error",text:"invalid voucher id",duration:5e3}),e.submitted=!0):e.submitted=!1}}))()},getplanprices(){var e=this;return Object(n["a"])((function*(){console.log("hai",e.amount),e.amount=311}))()},getplans(){var e=this;return Object(n["a"])((function*(){const t=yield Object(f["plans"])();e.plandata=t.data,e.plandata.map(t=>{e.options.push(t.planCode)})}))()},getplanprice(){var e=this;return Object(n["a"])((function*(){null!==e.selected&&(e.amount="311");var t="";if(null!==e.selected){e.plandata.map(a=>{e.selected===a.planCode&&(t=a.id)}),console.log("id",t);yield Object(f["Ic"])(t)}}))()},validateStep(e){var t=this.$refs[e];return t.validate()},mergePartialModels(e,t){t&&(this.finalModel=Object.assign({},this.finalModel,e))},getClientDetails(){var e=this;return Object(n["a"])((function*(){const t=yield Object(f["registerTemplete"])();e.clientTemplete=t.data,e.SettlementOpt=e.clientTemplete.addressTemplateData.SettlementData,console.log(e.clientTemplete)}))()},changeSettlement(e){var t=this;return Object(n["a"])((function*(){console.log(e);const a=yield Object(f["SettlementTemplete"])(e);t.form.state=a.data.state,t.form.country=a.data.country}))()},bouquetsChange(e){this.form.amount=1500},register(){var e=this;return Object(n["a"])((function*(){e.submitted=!0;try{const t={forename:e.form.firstName,surname:e.form.lastName,gender:"male",email:e.form.email,mobile:e.form.number,dob:"12101990",officeId:e.getUserDetails.officeId,address:[{addressNo:e.form.address,state:e.form.state,country:e.form.country,Settlement:e.form.Settlement,postCode:e.form.postCode,countryCode:"NGA",addressType:"PRIMARY"},{addressNo:e.form.address,state:e.form.state,country:e.form.country,Settlement:e.form.Settlement,postCode:e.form.postCode,countryCode:"NGA",addressType:"Settlement"}],devices:[{deviceId:e.form.stbNumber}],plans:[{planCode:"STARTER"},{planCode:"FTA"}],credentails:{username:e.form.stbNumber,password:"paywd@123"},refId:"12233333",IsVerified:"NO",valid:!0,salutation:e.form.personalTitle};console.log("form",t);const a=yield Object(f["Sc"])(t);e.clientId=a.data.clientId,a&&(e.form={},e.$swal({group:"alert",type:"success",text:"Your Customer Registeration Done Successfully",duration:5e3}),e.makeredeem()),e.submitted=!1}catch(t){e.$notify({group:"alert",type:"error",text:""+t.message.errors[0].defaultUserMessage,duration:5e3})}}))()},refresh(){return Object(n["a"])((function*(){setTimeout((function(){location.reload()}),200)}))()}}},b=p,v=(a("0904"),a("5125"),a("2877")),g=Object(v["a"])(b,r,l,!1,null,"f3561cd6",null);t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-15c062e0.e8cfe2c6.js.map