(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b122646c"],{"2cd1":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",[a("PageHeader",{attrs:{items:e.items}}),a("div",{staticClass:"animated fadeIn"},[a("b-card",{staticClass:"mt-10 ml-10 mr-10 mx-auto",attrs:{header:"Billing"}},[a("b-col",{attrs:{md:"12"}},[a("b-button",{staticClass:"btn btn-custome float-right btn-secondary mb-3",attrs:{text:"Create Tenant"},on:{click:function(t){return e.$router.push({path:"/create"})}}},[e._v("Create Billing")])],1),a("div",{staticClass:"mt-3"},[a("b-table",{ref:"roles",staticClass:"mt-3",attrs:{id:"my-table",dark:e.dark,hover:e.hover,striped:e.striped,bordered:e.bordered,filter:e.filter,responsive:!0,"current-page":e.currentPage,"per-page":e.perPage,"thead-class":"header",small:e.small,fixed:e.fixed,fields:e.BillingColumns,items:e.item},scopedSlots:e._u([{key:"actions",fn:function(t){return[a("span",{staticClass:"mr-2",on:{click:function(a){return e.editBilling(t)}}},[a("i",{staticClass:"fas fa-pencil-alt edit"})]),a("span",{on:{click:function(a){return e.deleteBilling(t)}}},[a("i",{staticClass:"fa fa-times edit"})])]}},{key:"row-details",fn:function(t){return[a("b-card",{staticClass:"role-details"},[a("div",[a("multiselect",{attrs:{id:t.item._id,value:e.BillingMap[t.item._id],options:e.allBilling,label:"Billing","track-by":"Billing",multiple:!0},on:{select:function(a,l){return e.addBillingToRole(a,l,t)}}})],1)])]}}])}),a("b-modal",{attrs:{id:"roleModal"},model:{value:e.BillingModal,callback:function(t){e.BillingModal=t},expression:"BillingModal"}},[a("div",{attrs:{slot:"modal-header"},slot:"modal-header"},[e._v(e._s(e.header))]),a("div",[a("b-input",{model:{value:e.Billing,callback:function(t){e.Billing=t},expression:"Billing"}}),a("b-input",{staticClass:"mt-2",model:{value:e.Billing,callback:function(t){e.Billing=t},expression:"Billing"}}),a("multiselect",{staticClass:"perm_input",attrs:{options:e.methods,placeholder:"Select a Method",label:"value","track-by":"value",multiple:!1},model:{value:e.Billing,callback:function(t){e.Billing=t},expression:"Billing"}})],1),a("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("b-button",{attrs:{variant:"primary"},on:{click:e.handleEdit}},[e._v("Submit")]),a("b-button",{staticClass:"ml-2",attrs:{variant:"secondary"},on:{click:e.clearModal}},[e._v("Cancel")])],1)]),a("div",{staticStyle:{float:"right"}},[a("b-pagination",{attrs:{"per-page":e.perPage,"total-rows":e.Billing,"aria-controls":"my-table","hide-goto-end-buttons":""},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)],1)],1)],1)},i=[],r=a("1da1"),n=a("c2a4"),o=a("444f"),s=a("2579"),c=a("8e5f"),d=a.n(c),u=a("b410"),m=a("039f"),p=a("6bf2"),f={page:{title:"Billing",meta:[{name:"description",content:n.description}]},components:{Layout:o["a"],PageHeader:s["a"],Multiselect:d.a,ValidationProvider:m["ValidationProvider"],ValidationObserver:m["ValidationObserver"],ModelSelect:u["ModelSelect"]},data(){return{plandata:"",striped:!1,bordered:!0,filter:"",perPage:10,hover:!0,currentPage:1,small:!1,dark:!1,fixed:!1,amount:"",submitted:!1,title:"Register",item:{key:"resource",value:"Frozen Yogurt",name:"159"},BillingColumns:[{key:"resource",label:"Resource"},{key:"name",label:"Billing"},{key:"actions",sortable:!0}],items:[{text:"Home",href:"/"},{text:"Billing",active:!0}],finalModel:{},selected:null,clientId:"",options:["DAF"],item:{value:"",text:""},form:{personalTitle:"",firstName:"",middleName:"",lastName:"",gender:"",email:"",number:"",address:"",Billing:"",state:"",country:"",postCode:"",stbNumber:"",bouquets:null,amount:0,voucherNo:""},titles:["Mr.","Sri.","Mrs"],vouchernumber:"",genderOpt:["Male","Female","Other"],BillingOpt:[],bouquetsOpt:[{value:null,text:"Please select an option"},"FTA  AND STARTER"],clientTemplete:{}}},computed:{getUserDetails(){return this.$store.getters["auth/loggedInDetails"]}},mounted(){this.getClientDetails(),this.getplans()},methods:{makeredeem(){var e=this;return Object(r["a"])((function*(){try{const t={pinNumber:e.vouchernumber,clientId:e.clientId};let a=yield Object(p["Kc"])(t);a&&(e.$swal({group:"alert",type:"success",text:"Your Redeemption Done Successfully",duration:5e3}),e.refresh())}catch(t){e.$toasted.error(t.message.errors[0].developerMessage,{duration:7e3})}}))()},myFunction(){var e=this;return Object(r["a"])((function*(){if(18===e.vouchernumber.length){const a=yield Object(p["Pc"])(e.vouchernumber);var t=a.data;console.log(t),t<5?(e.$notify({group:"alert",type:"error",text:"invalid voucher id",duration:5e3}),e.submitted=!0):e.submitted=!1}}))()},getplanprices(){var e=this;return Object(r["a"])((function*(){console.log("hai",e.amount),e.amount=311}))()},getplans(){var e=this;return Object(r["a"])((function*(){const t=yield Object(p["plans"])();e.plandata=t.data,e.plandata.map(t=>{e.options.push(t.planCode)})}))()},getplanprice(){var e=this;return Object(r["a"])((function*(){null!==e.selected&&(e.amount="311");var t="";if(null!==e.selected){e.plandata.map(a=>{e.selected===a.planCode&&(t=a.id)}),console.log("id",t);yield Object(p["Ic"])(t)}}))()},validateStep(e){var t=this.$refs[e];return t.validate()},mergePartialModels(e,t){t&&(this.finalModel=Object.assign({},this.finalModel,e))},getClientDetails(){var e=this;return Object(r["a"])((function*(){const t=yield Object(p["registerTemplete"])();e.clientTemplete=t.data,e.BillingOpt=e.clientTemplete.addressTemplateData.BillingData,console.log(e.clientTemplete)}))()},changeBilling(e){var t=this;return Object(r["a"])((function*(){console.log(e);const a=yield Object(p["BillingTemplete"])(e);t.form.state=a.data.state,t.form.country=a.data.country}))()},bouquetsChange(e){this.form.amount=1500},register(){var e=this;return Object(r["a"])((function*(){e.submitted=!0;try{const t={forename:e.form.firstName,surname:e.form.lastName,gender:"male",email:e.form.email,mobile:e.form.number,dob:"12101990",officeId:e.getUserDetails.officeId,address:[{addressNo:e.form.address,state:e.form.state,country:e.form.country,Billing:e.form.Billing,postCode:e.form.postCode,countryCode:"NGA",addressType:"PRIMARY"},{addressNo:e.form.address,state:e.form.state,country:e.form.country,Billing:e.form.Billing,postCode:e.form.postCode,countryCode:"NGA",addressType:"BILLING"}],devices:[{deviceId:e.form.stbNumber}],plans:[{planCode:"STARTER"},{planCode:"FTA"}],credentails:{username:e.form.stbNumber,password:"paywd@123"},refId:"12233333",IsVerified:"NO",valid:!0,salutation:e.form.personalTitle};console.log("form",t);const a=yield Object(p["Sc"])(t);e.clientId=a.data.clientId,a&&(e.form={},e.$swal({group:"alert",type:"success",text:"Your Customer Registeration Done Successfully",duration:5e3}),e.makeredeem()),e.submitted=!1}catch(t){e.$notify({group:"alert",type:"error",text:""+t.message.errors[0].defaultUserMessage,duration:5e3})}}))()},refresh(){return Object(r["a"])((function*(){setTimeout((function(){location.reload()}),200)}))()}}},g=f,b=(a("e773"),a("a0c9"),a("2877")),v=Object(b["a"])(g,l,i,!1,null,"6daef0e6",null);t["default"]=v.exports},"6bd7":function(e,t,a){},"6dc5":function(e,t,a){},a0c9:function(e,t,a){"use strict";var l=a("6bd7"),i=a.n(l);i.a},e773:function(e,t,a){"use strict";var l=a("6dc5"),i=a.n(l);i.a}}]);
//# sourceMappingURL=chunk-b122646c.5b4d98d9.js.map