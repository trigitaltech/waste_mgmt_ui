(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b607fb7e"],{3143:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",[a("PageHeader",{attrs:{items:e.items}}),a("div",{staticClass:"animated fadeIn"},[a("b-card",{staticClass:"mt-10 ml-10 mr-10 mx-auto",attrs:{header:"Redcard"}},[a("b-col",{attrs:{md:"12"}},[a("b-button",{staticClass:"btn btn-custome float-right btn-secondary mb-3",attrs:{text:"Create Tenant"},on:{click:function(t){return e.$router.push({path:"/create"})}}},[e._v("Create Redcard")])],1),a("div",{staticClass:"mt-3"},[a("b-table",{ref:"roles",staticClass:"mt-3",attrs:{id:"my-table",dark:e.dark,hover:e.hover,striped:e.striped,bordered:e.bordered,filter:e.filter,responsive:!0,"current-page":e.currentPage,"per-page":e.perPage,"thead-class":"header",small:e.small,fixed:e.fixed,fields:e.RedcardColumns,items:e.item},scopedSlots:e._u([{key:"actions",fn:function(t){return[a("span",{staticClass:"mr-2",on:{click:function(a){return e.editRedcard(t)}}},[a("i",{staticClass:"fas fa-pencil-alt edit"})]),a("span",{on:{click:function(a){return e.deleteRedcard(t)}}},[a("i",{staticClass:"fa fa-times edit"})])]}},{key:"row-details",fn:function(t){return[a("b-card",{staticClass:"role-details"},[a("div",[a("multiselect",{attrs:{id:t.item._id,value:e.RedcardMap[t.item._id],options:e.allRedcard,label:"Redcard","track-by":"Redcard",multiple:!0},on:{select:function(a,r){return e.addRedcardToRole(a,r,t)}}})],1)])]}}])}),a("b-modal",{attrs:{id:"roleModal"},model:{value:e.RedcardModal,callback:function(t){e.RedcardModal=t},expression:"RedcardModal"}},[a("div",{attrs:{slot:"modal-header"},slot:"modal-header"},[e._v(e._s(e.header))]),a("div",[a("b-input",{model:{value:e.Redcard,callback:function(t){e.Redcard=t},expression:"Redcard"}}),a("b-input",{staticClass:"mt-2",model:{value:e.Redcard,callback:function(t){e.Redcard=t},expression:"Redcard"}}),a("multiselect",{staticClass:"perm_input",attrs:{options:e.methods,placeholder:"Select a Method",label:"value","track-by":"value",multiple:!1},model:{value:e.Redcard,callback:function(t){e.Redcard=t},expression:"Redcard"}})],1),a("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("b-button",{attrs:{variant:"primary"},on:{click:e.handleEdit}},[e._v("Submit")]),a("b-button",{staticClass:"ml-2",attrs:{variant:"secondary"},on:{click:e.clearModal}},[e._v("Cancel")])],1)]),a("div",{staticStyle:{float:"right"}},[a("b-pagination",{attrs:{"per-page":e.perPage,"total-rows":e.Redcard,"aria-controls":"my-table","hide-goto-end-buttons":""},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)],1)],1)],1)},o=[],s=a("1da1"),d=a("c2a4"),l=a("444f"),n=a("2579"),i=a("8e5f"),c=a.n(i),u=a("b410"),m=a("039f"),f=a("6bf2"),p={page:{title:"Redcard",meta:[{name:"description",content:d.description}]},components:{Layout:l["a"],PageHeader:n["a"],Multiselect:c.a,ValidationProvider:m["ValidationProvider"],ValidationObserver:m["ValidationObserver"],ModelSelect:u["ModelSelect"]},data(){return{plandata:"",striped:!1,bordered:!0,filter:"",perPage:10,hover:!0,currentPage:1,small:!1,dark:!1,fixed:!1,amount:"",submitted:!1,title:"Register",item:{key:"resource",value:"Frozen Yogurt",name:"159"},RedcardColumns:[{key:"resource",label:"Resource"},{key:"name",label:"Redcard"},{key:"actions",sortable:!0}],items:[{text:"Home",href:"/"},{text:"Redcard",active:!0}],finalModel:{},selected:null,clientId:"",options:["DAF"],item:{value:"",text:""},form:{personalTitle:"",firstName:"",middleName:"",lastName:"",gender:"",email:"",number:"",address:"",Redcard:"",state:"",country:"",postCode:"",stbNumber:"",bouquets:null,amount:0,voucherNo:""},titles:["Mr.","Sri.","Mrs"],vouchernumber:"",genderOpt:["Male","Female","Other"],RedcardOpt:[],bouquetsOpt:[{value:null,text:"Please select an option"},"FTA  AND STARTER"],clientTemplete:{}}},computed:{getUserDetails(){return this.$store.getters["auth/loggedInDetails"]}},mounted(){this.getClientDetails(),this.getplans()},methods:{makeredeem(){var e=this;return Object(s["a"])((function*(){try{const t={pinNumber:e.vouchernumber,clientId:e.clientId};let a=yield Object(f["Kc"])(t);a&&(e.$swal({group:"alert",type:"success",text:"Your Redeemption Done Successfully",duration:5e3}),e.refresh())}catch(t){e.$toasted.error(t.message.errors[0].developerMessage,{duration:7e3})}}))()},myFunction(){var e=this;return Object(s["a"])((function*(){if(18===e.vouchernumber.length){const a=yield Object(f["Pc"])(e.vouchernumber);var t=a.data;console.log(t),t<5?(e.$notify({group:"alert",type:"error",text:"invalid voucher id",duration:5e3}),e.submitted=!0):e.submitted=!1}}))()},getplanprices(){var e=this;return Object(s["a"])((function*(){console.log("hai",e.amount),e.amount=311}))()},getplans(){var e=this;return Object(s["a"])((function*(){const t=yield Object(f["plans"])();e.plandata=t.data,e.plandata.map(t=>{e.options.push(t.planCode)})}))()},getplanprice(){var e=this;return Object(s["a"])((function*(){null!==e.selected&&(e.amount="311");var t="";if(null!==e.selected){e.plandata.map(a=>{e.selected===a.planCode&&(t=a.id)}),console.log("id",t);yield Object(f["Ic"])(t)}}))()},validateStep(e){var t=this.$refs[e];return t.validate()},mergePartialModels(e,t){t&&(this.finalModel=Object.assign({},this.finalModel,e))},getClientDetails(){var e=this;return Object(s["a"])((function*(){const t=yield Object(f["registerTemplete"])();e.clientTemplete=t.data,e.RedcardOpt=e.clientTemplete.addressTemplateData.RedcardData,console.log(e.clientTemplete)}))()},changeRedcard(e){var t=this;return Object(s["a"])((function*(){console.log(e);const a=yield Object(f["RedcardTemplete"])(e);t.form.state=a.data.state,t.form.country=a.data.country}))()},bouquetsChange(e){this.form.amount=1500},register(){var e=this;return Object(s["a"])((function*(){e.submitted=!0;try{const t={forename:e.form.firstName,surname:e.form.lastName,gender:"male",email:e.form.email,mobile:e.form.number,dob:"12101990",officeId:e.getUserDetails.officeId,address:[{addressNo:e.form.address,state:e.form.state,country:e.form.country,Redcard:e.form.Redcard,postCode:e.form.postCode,countryCode:"NGA",addressType:"PRIMARY"},{addressNo:e.form.address,state:e.form.state,country:e.form.country,Redcard:e.form.Redcard,postCode:e.form.postCode,countryCode:"NGA",addressType:"BILLING"}],devices:[{deviceId:e.form.stbNumber}],plans:[{planCode:"STARTER"},{planCode:"FTA"}],credentails:{username:e.form.stbNumber,password:"paywd@123"},refId:"12233333",IsVerified:"NO",valid:!0,salutation:e.form.personalTitle};console.log("form",t);const a=yield Object(f["Sc"])(t);e.clientId=a.data.clientId,a&&(e.form={},e.$swal({group:"alert",type:"success",text:"Your Customer Registeration Done Successfully",duration:5e3}),e.makeredeem()),e.submitted=!1}catch(t){e.$notify({group:"alert",type:"error",text:""+t.message.errors[0].defaultUserMessage,duration:5e3})}}))()},refresh(){return Object(s["a"])((function*(){setTimeout((function(){location.reload()}),200)}))()}}},b=p,v=(a("d75f"),a("3e2b"),a("2877")),g=Object(v["a"])(b,r,o,!1,null,"08d04fa7",null);t["default"]=g.exports},"3e2b":function(e,t,a){"use strict";var r=a("f872"),o=a.n(r);o.a},c1a0:function(e,t,a){},d75f:function(e,t,a){"use strict";var r=a("c1a0"),o=a.n(r);o.a},f872:function(e,t,a){}}]);
//# sourceMappingURL=chunk-b607fb7e.fba59fe9.js.map