(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b607fb7e"],{3143:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Layout",[r("PageHeader",{attrs:{items:e.items}}),r("div",{staticClass:"animated fadeIn"},[r("b-card",{staticClass:"mt-10 ml-10 mr-10 mx-auto",attrs:{header:"Redcard"}},[r("b-col",{attrs:{md:"12"}},[r("b-button",{staticClass:"btn btn-custome float-right btn-secondary mb-3",attrs:{text:"Create Tenant"},on:{click:function(t){return e.$router.push({path:"/create"})}}},[e._v("Create Redcard")])],1),r("div",{staticClass:"mt-3"},[r("b-table",{ref:"roles",staticClass:"mt-3",attrs:{id:"my-table",dark:e.dark,hover:e.hover,striped:e.striped,bordered:e.bordered,filter:e.filter,responsive:!0,"current-page":e.currentPage,"per-page":e.perPage,"thead-class":"header",small:e.small,fixed:e.fixed,fields:e.RedcardColumns,items:e.item},scopedSlots:e._u([{key:"actions",fn:function(t){return[r("span",{staticClass:"mr-2",on:{click:function(r){return e.editRedcard(t)}}},[r("i",{staticClass:"fas fa-pencil-alt edit"})]),r("span",{on:{click:function(r){return e.deleteRedcard(t)}}},[r("i",{staticClass:"fa fa-times edit"})])]}},{key:"row-details",fn:function(t){return[r("b-card",{staticClass:"role-details"},[r("div",[r("multiselect",{attrs:{id:t.item._id,value:e.RedcardMap[t.item._id],options:e.allRedcard,label:"Redcard","track-by":"Redcard",multiple:!0},on:{select:function(r,a){return e.addRedcardToRole(r,a,t)}}})],1)])]}}])}),r("b-modal",{attrs:{id:"roleModal"},model:{value:e.RedcardModal,callback:function(t){e.RedcardModal=t},expression:"RedcardModal"}},[r("div",{attrs:{slot:"modal-header"},slot:"modal-header"},[e._v(e._s(e.header))]),r("div",[r("b-input",{model:{value:e.Redcard,callback:function(t){e.Redcard=t},expression:"Redcard"}}),r("b-input",{staticClass:"mt-2",model:{value:e.Redcard,callback:function(t){e.Redcard=t},expression:"Redcard"}}),r("multiselect",{staticClass:"perm_input",attrs:{options:e.methods,placeholder:"Select a Method",label:"value","track-by":"value",multiple:!1},model:{value:e.Redcard,callback:function(t){e.Redcard=t},expression:"Redcard"}})],1),r("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[r("b-button",{attrs:{variant:"primary"},on:{click:e.handleEdit}},[e._v("Submit")]),r("b-button",{staticClass:"ml-2",attrs:{variant:"secondary"},on:{click:e.clearModal}},[e._v("Cancel")])],1)]),r("div",{staticStyle:{float:"right"}},[r("b-pagination",{attrs:{"per-page":e.perPage,"total-rows":e.Redcard,"aria-controls":"my-table","hide-goto-end-buttons":""},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)],1)],1)],1)},n=[],s=(r("7f7f"),r("96cf"),r("1da1")),i=r("ade3"),o=r("c2a4"),c=r("444f"),d=r("2579"),l=r("8e5f"),u=r.n(l),m=r("b410"),p=r("039f"),f=r("6bf2"),h={page:{title:"Redcard",meta:[{name:"description",content:o.description}]},components:{Layout:c["a"],PageHeader:d["a"],Multiselect:u.a,ValidationProvider:p["ValidationProvider"],ValidationObserver:p["ValidationObserver"],ModelSelect:m["ModelSelect"]},data:function(){var e;return e={plandata:"",striped:!1,bordered:!0,filter:"",perPage:10,hover:!0,currentPage:1,small:!1,dark:!1,fixed:!1,amount:"",submitted:!1,title:"Register",item:{key:"resource",value:"Frozen Yogurt",name:"159"},RedcardColumns:[{key:"resource",label:"Resource"},{key:"name",label:"Redcard"},{key:"actions",sortable:!0}],items:[{text:"Home",href:"/"},{text:"Redcard",active:!0}],finalModel:{},selected:null,clientId:"",options:["DAF"]},Object(i["a"])(e,"item",{value:"",text:""}),Object(i["a"])(e,"form",{personalTitle:"",firstName:"",middleName:"",lastName:"",gender:"",email:"",number:"",address:"",Redcard:"",state:"",country:"",postCode:"",stbNumber:"",bouquets:null,amount:0,voucherNo:""}),Object(i["a"])(e,"titles",["Mr.","Sri.","Mrs"]),Object(i["a"])(e,"vouchernumber",""),Object(i["a"])(e,"genderOpt",["Male","Female","Other"]),Object(i["a"])(e,"RedcardOpt",[]),Object(i["a"])(e,"bouquetsOpt",[{value:null,text:"Please select an option"},"FTA  AND STARTER"]),Object(i["a"])(e,"clientTemplete",{}),e},computed:{getUserDetails:function(){return this.$store.getters["auth/loggedInDetails"]}},mounted:function(){this.getClientDetails(),this.getplans()},methods:{makeredeem:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t={pinNumber:this.vouchernumber,clientId:this.clientId},e.next=4,Object(f["Kc"])(t);case 4:r=e.sent,r&&(this.$swal({group:"alert",type:"success",text:"Your Redeemption Done Successfully",duration:5e3}),this.refresh()),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.$toasted.error(e.t0.message.errors[0].developerMessage,{duration:7e3});case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}(),myFunction:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(18!==this.vouchernumber.length){e.next=7;break}return e.next=3,Object(f["Pc"])(this.vouchernumber);case 3:t=e.sent,r=t.data,console.log(r),r<5?(this.$notify({group:"alert",type:"error",text:"invalid voucher id",duration:5e3}),this.submitted=!0):this.submitted=!1;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getplanprices:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("hai",this.amount),this.amount=311;case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getplans:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["plans"])();case 2:t=e.sent,this.plandata=t.data,this.plandata.map((function(e){r.options.push(e.planCode)}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getplanprice:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==this.selected&&(this.amount="311"),t="",null===this.selected){e.next=8;break}return this.plandata.map((function(e){r.selected===e.planCode&&(t=e.id)})),console.log("id",t),e.next=7,Object(f["Ic"])(t);case 7:e.sent;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),validateStep:function(e){var t=this.$refs[e];return t.validate()},mergePartialModels:function(e,t){t&&(this.finalModel=Object.assign({},this.finalModel,e))},getClientDetails:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["registerTemplete"])();case 2:t=e.sent,this.clientTemplete=t.data,this.RedcardOpt=this.clientTemplete.addressTemplateData.RedcardData,console.log(this.clientTemplete);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),changeRedcard:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,Object(f["RedcardTemplete"])(t);case 3:r=e.sent,this.form.state=r.data.state,this.form.country=r.data.country;case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),bouquetsChange:function(e){this.form.amount=1500},register:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.submitted=!0,e.prev=1,t={forename:this.form.firstName,surname:this.form.lastName,gender:"male",email:this.form.email,mobile:this.form.number,dob:"12101990",officeId:this.getUserDetails.officeId,address:[{addressNo:this.form.address,state:this.form.state,country:this.form.country,Redcard:this.form.Redcard,postCode:this.form.postCode,countryCode:"NGA",addressType:"PRIMARY"},{addressNo:this.form.address,state:this.form.state,country:this.form.country,Redcard:this.form.Redcard,postCode:this.form.postCode,countryCode:"NGA",addressType:"BILLING"}],devices:[{deviceId:this.form.stbNumber}],plans:[{planCode:"STARTER"},{planCode:"FTA"}],credentails:{username:this.form.stbNumber,password:"paywd@123"},refId:"12233333",IsVerified:"NO",valid:!0,salutation:this.form.personalTitle},console.log("form",t),e.next=6,Object(f["Sc"])(t);case 6:r=e.sent,this.clientId=r.data.clientId,r&&(this.form={},this.$swal({group:"alert",type:"success",text:"Your Customer Registeration Done Successfully",duration:5e3}),this.makeredeem()),this.submitted=!1,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](1),this.$notify({group:"alert",type:"error",text:"".concat(e.t0.message.errors[0].defaultUserMessage),duration:5e3});case 15:case"end":return e.stop()}}),e,this,[[1,12]])})));function t(){return e.apply(this,arguments)}return t}(),refresh:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:setTimeout((function(){location.reload()}),200);case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}},b=h,v=(r("d75f"),r("3e2b"),r("2877")),g=Object(v["a"])(b,a,n,!1,null,"08d04fa7",null);t["default"]=g.exports},"3e2b":function(e,t,r){"use strict";var a=r("f872"),n=r.n(a);n.a},c1a0:function(e,t,r){},d75f:function(e,t,r){"use strict";var a=r("c1a0"),n=r.n(a);n.a},f872:function(e,t,r){}}]);
//# sourceMappingURL=chunk-b607fb7e-legacy.84af9ea5.js.map