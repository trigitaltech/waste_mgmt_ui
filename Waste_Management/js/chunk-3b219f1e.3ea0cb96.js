(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b219f1e"],{"054f":function(e,t,a){},"32bd":function(e,t,a){},"3cf4":function(e,t,a){"use strict";var r=a("054f"),o=a.n(r);o.a},"5a78":function(e,t,a){"use strict";var r=a("32bd"),o=a.n(r);o.a},cfd0:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",[a("PageHeader"),a("div",{staticClass:"animated"},[a("b-card",{staticClass:"mt-10 ml-10 mr-10 mx-auto",attrs:{header:"Create Incoming Trip"}},[a("div",{staticClass:"mt-1"},[a("div",{staticClass:"mx-xl-5"},[a("div",{staticClass:"card-body"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.create(t)}}},[a("b-row",[a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("LGU")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"form-control",attrs:{readonly:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Baranggay")]),a("b-form-select",{staticClass:"form-control",attrs:{options:e.servingAreas},on:{change:e.getRoutes},model:{value:e.area,callback:function(t){e.area="string"===typeof t?t.trim():t},expression:"area"}})],1)],1),a("b-row",{staticClass:"mt-3"},[a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Serving Route")]),a("multiselect",{attrs:{multiple:!0,options:e.servingRoutes},on:{input:e.getRouteCode},model:{value:e.route,callback:function(t){e.route=t},expression:"route"}})],1),a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardNameEx"}},[e._v("CONTROL NO")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.controlno,expression:"controlno"}],staticClass:"form-control",attrs:{name:"body"},domProps:{value:e.controlno},on:{input:function(t){t.target.composing||(e.controlno=t.target.value)}}})])],1),a("b-row",{staticClass:"mt-3"},[a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Trip Date")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.date,expression:"date"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.date},on:{input:function(t){t.target.composing||(e.date=t.target.value)}}})]),a("b-col",{staticClass:"ml-3"},[a("label",{staticClass:"grey-text font-weight-dark mr-2",attrs:{for:"defaultFormCardtextEx"}},[e._v("Trip Start Time")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.time,expression:"time"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.time},on:{input:function(t){t.target.composing||(e.time=t.target.value)}}})])],1),a("b-row",{staticClass:"mt-3"},[a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardNameEx"}},[e._v("Hauler")]),a("b-form-select",{staticClass:"form-control",attrs:{options:e.haulerListNames},on:{change:e.getVehiclesDriversHelpers},model:{value:e.hauler,callback:function(t){e.hauler=t},expression:"hauler"}})],1),a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Plate No")]),a("b-form-select",{staticClass:"form-control",attrs:{options:e.plates},on:{change:e.getTruckType},model:{value:e.plate,callback:function(t){e.plate=t},expression:"plate"}})],1)],1),a("b-row",{staticClass:"mt-3"},[a("b-col",{},[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardNameEx"}},[e._v("Truck Type")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.trucktype,expression:"trucktype"}],staticClass:"form-control",attrs:{name:"trucktype",disabled:"",readonly:""},domProps:{value:e.trucktype},on:{input:function(t){t.target.composing||(e.trucktype=t.target.value)}}})]),a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardNameEx"}},[e._v("Body")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.body,expression:"body"}],staticClass:"form-control",attrs:{name:"body",readonly:"",disabled:""},domProps:{value:e.body},on:{input:function(t){t.target.composing||(e.body=t.target.value)}}})])],1),a("b-row",{staticClass:"mt-3"},[a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Driver Name")]),a("b-form-select",{staticClass:"form-control",attrs:{options:e.drivers},on:{change:e.getid},model:{value:e.driver,callback:function(t){e.driver="string"===typeof t?t.trim():t},expression:"driver"}})],1),a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Helper")]),a("b-form-select",{staticClass:"form-control",attrs:{options:e.helpers},on:{change:e.gethelperid},model:{value:e.helper,callback:function(t){e.helper="string"===typeof t?t.trim():t},expression:"helper"}})],1)],1),a("b-row",{staticClass:"mt-3"},[a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Garbage Collectors")]),a("multiselect",{attrs:{multiple:!0,options:e.collectorListNames},on:{input:e.getgarbage},model:{value:e.collector,callback:function(t){e.collector=t},expression:"collector"}})],1),a("b-col",[a("label",{staticClass:"grey-text font-weight-dark",attrs:{for:"defaultFormCardtextEx"}},[e._v("Volume Checker")]),a("b-form-select",{staticClass:"form-control",attrs:{options:e.checkerListNames},on:{change:e.getCheckerId},model:{value:e.checker,callback:function(t){e.checker="string"===typeof t?t.trim():t},expression:"checker"}})],1)],1),a("button",{staticClass:"btn btn-custome ml-4 btn-secondary mb-3 float-right mr-2 mt-5",attrs:{type:"submit"}},[e._v("Create")])],1)])])])])],1)],1)},o=[],s=a("1da1"),l=a("2b0e"),i=a("c2a4"),c=a("444f"),n=a("2579"),u=(a("323e"),a("fea2")),d=a("859b"),m=a("8e5f"),p=a.n(m),h=a("c1df"),g=a.n(h),v=a("6bf2");l["default"].component("multiselect",p.a);var f={page:{title:"Trip Incoming Details",meta:[{name:"description",content:i.description}]},data(){return{tripdata:[],inputs:[{name:""}],dispatcherid:"",dispatchername:"",username:"",areadata:[],helperdata:[],areaarray:"",routedate:[],routearray:[],emp:[],code:null,controlno:"",area:"",loginlguid:"",route:"",driver:"",contractor:"",collector:"",lgu:"lgu1",plate:"",plates:[],body:"",tripDate:"",trucktype:"",driverid:"",helperid:"",haulerId:"",checkerId:"",startTime:"",areaid:"",drivers:[],helpers:[],vehicles:[],servingAreas:[],driver:"",helper:null,servingRoutes:[],driverList:[],checkerList:[],checkerListNames:[],checker:"",hauler:"",haulerid:"",haulerCode:"",userdata:[],haulerList:[],haulerListNames:[],collectorList:[],collectorListNames:[],garbagearray:[],paleroList:[],garbage:null,areaId:null,routeId:null,garbageCollectors:[],driverdata:[],brgy:{},routeCodes:[],loginDetails:{},routearray:[],date:"",time:""}},components:{Layout:c["a"],PageHeader:n["a"],VueTimepicker:u["a"],Multiselect:p.a,datetime:d["Datetime"]},computed:{getUserDetails(){return this.$store.getters["auth/loggedInDetails"]}},mounted(){this.date=g()(new Date).format("DD/MM/YYYY"),this.time=g()(new Date).format("HH:mm:ss"),this.tripDate=new Date,this.startTime=new Date,console.log(this.tripDate+" "+this.startTime),this.getLgu(),this.getBaraggay(),this.getvolume(),this.getname(),this.getUsers(),console.log(JSON.parse(localStorage.getItem("auth.currentUser")))},methods:{getLgu(){var e=this;return Object(s["a"])((function*(){const t=JSON.parse(localStorage.getItem("auth.currentUser"));e.loginlguid=t.lguemployee.lguId,e.dispatcherid=t.lguemployee.id,e.dispatchername=t.lguemployee.firstName;const a=yield Object(v["lc"])(e.loginlguid);e.loginDetails={lguEmployeeCode:t.lguemployee.code,id:t.lguemployee.lguid,name:a.data.response.result.lguName},console.log(e.loginDetails)}))()},getBaraggay(){var e=this;return Object(s["a"])((function*(){try{const t=yield Object(v["hc"])(e.loginlguid);e.areadata=t.data.response.result,e.areadata.map(t=>{e.servingAreas.push(t.areaName)})}catch(t){console.log(t)}}))()},getvolume(){var e=this;return Object(s["a"])((function*(){try{var t="VOLUME_CHECKER";const a=yield Object(v["yc"])(e.loginlguid,t);e.checkerList=a.data.response.result,e.checkerList.map(t=>{e.checkerListNames.push(t.userName)})}catch(a){console.log(a)}}))()},getname(){var e=this;return Object(s["a"])((function*(){try{const t=yield Object(v["wc"])(e.loginlguid);e.username=t.data.response.result.contactFirstName}catch(t){console.log(t)}}))()},getUsers(){return Object(s["a"])((function*(){}))()},getVehiclesDriversHelpers(){var e=this;return Object(s["a"])((function*(){try{for(var t=0;t<e.haulerList.length;t++)if(e.hauler===e.haulerList[t].haulerName){e.haulerid=e.haulerList[t].id;const o=yield Object(v["pc"])(e.haulerList[t].id);e.vehicles=o.data.response.result,e.vehicles.map(t=>{e.plates.push(t.plateNo)});var a="DRIVER";const s=yield Object(v["ic"])(e.haulerList[t].id,a);e.driverdata=s.data.response.result,e.driverdata.map(t=>{e.drivers.push(t.firstName)});var r="HELPER";const l=yield Object(v["jc"])(e.haulerList[t].id,r);e.helperdata=l.data.response.result,e.helperdata.map(t=>{e.helpers.push(t.firstName)})}}catch(o){console.log(o)}}))()},getRoutes(){var e=this;return Object(s["a"])((function*(){try{for(var t=0;t<e.areadata.length;t++)if(e.area===e.areadata[t].areaName){e.areaid=e.areadata[t].id;const r=yield Object(v["Bc"])();e.haulerList=r.data.response.HaulerMaster,e.haulerList.map(t=>{e.haulerListNames.push(t.haulerName)});var a="PALERO";const o=yield Object(v["sc"])(e.areadata[t].id,a);e.collectorList=o.data.response.result,console.log(e.collectorList),e.collectorList.map(t=>{e.collectorListNames.push(t.userName)});const s=yield Object(v["mc"])(e.areadata[t].id);e.routedata=s.data.response.result.routeMaster,e.routedata.length>0&&e.routedata.map(t=>{null!=t.routeName&&e.servingRoutes.push(t.routeName)})}}catch(r){console.log(r)}}))()},getvehicles(){var e=this;return Object(s["a"])((function*(){const t=yield Object(v["Xc"])();e.vehicles=t.data.response.vehicles,e.vehicles.map(t=>{e.plates.push(t.plateNo)}),console.log(e.plates)}))()},getareas(){this.areadata.map(e=>{this.area===e.areaName&&(this.areaarray=e)})},getid(){console.log("haiiiiii"),this.driverdata.map(e=>{this.driver===e.firstName&&(this.driverid=e.id)})},gethelperid(){this.helperdata.map(e=>{this.helper==e.firstName&&(console.log(e),this.helperid=e.id)}),console.log(this.helperid)},getGarbageCollectors(){this.collector.map(e=>{this.collectorList.map(t=>{if(e==t.userName){const e={employeeCode:t.code};this.garbageCollectors.push(e)}})})},gethaulerid(){this.haulerList.map(e=>{this.hauler==e.userName&&(this.haulerId=e.id)})},getCheckerId(){this.checkerList.map(e=>{this.checker==e.userName&&(this.checkerId=e.id)})},employeedata(){var e=this;return Object(s["a"])((function*(){try{const t=yield Object(v["zc"])();e.emp=t.data.response.HaulerEmployees,console.log(e.emp),e.emp.map(t=>{null!=t.haulerId&&("DRIVER"==t.type&&t.haulerId.id==e.haulerId&&e.drivers.push(t.userName),"HELPER"==t.type&&t.haulerId.id==e.haulerId&&e.helpers.push(t.userName))})}catch(t){}}))()},areas(){var e=this;return Object(s["a"])((function*(){try{const t=yield Areamasters();e.areadata=t.data.response.areaMaster,e.areadata.map(t=>{null!=t.areaName&&e.servingAreas.push(t.areaName)})}catch(t){console.log(t)}console.log(e.servingAreas)}))()},getRouteCode(){console.log("hai",this.route),this.routearray=[];for(var e=0;e<this.route.length;e++)this.routedata.map(t=>{this.route[e]===t.routeName&&(this.routearray.push({routeId:t.id}),console.log("routedata",this.routearray))})},getgarbage(){console.log("hai",this.collector),this.garbagearray=[];for(var e=0;e<this.collector.length;e++)this.collectorList.map(t=>{this.collector[e]===t.userName&&(this.garbagearray.push({garbageCollectorId:t.id,garbageCollectorName:t.userName}),console.log("routedata",this.garbagearray))})},routes(){var e=this;return Object(s["a"])((function*(){try{const t=yield routemaster();console.log(t),e.routedata=t.data.response.RouteMaster,e.routedata.map(t=>{null!=t.routeName&&e.servingRoutes.push(t.routeName)})}catch(t){}}))()},getRouteObject(e){this.routedata.map(t=>{if(e==t.routeName)return console.log(t),t})},create(){var e=this;return Object(s["a"])((function*(){try{e.route.map(t=>{e.routedata.map(a=>{if(t==a.routeName){const t={code:a.code};e.routeCodes.push(t)}})}),e.getGarbageCollectors(),e.areadata.areaName==e.area&&(e.areaId=e.areadata.code);const t={controlNo:e.controlno,tripDate:e.tripDate,lguId:e.loginlguid,haulerid:e.haulerid,truckBodyNo:e.body,truckplateNo:e.plate,truckType:e.trucktype,tripStartTime:e.startTime,tripEndTime:"",baranggayId:e.areaid,helperId:e.helperid,helperName:e.helper,driverId:e.driverid,driverName:e.driver,contractorDispatcherId:e.dispatcherid,contractorDispatcherName:e.dispatchername,volumeCheckerName:e.checker,volumeCheckerId:e.checkerId,volumeCheckerMeasuredVolume:"",volumeCheckerTotalKmServed:"",tripIncomingAreaRoute:e.routearray,garbageCollector:e.garbagearray},a=yield Object(v["f"])(t);e.tripdata=a.data.response.result,console.log("tripdata",e.tripdata),a&&(e.$swal({group:"alert",type:"success",text:"Incoming Trip Created",duration:5e3}),e.$router.push({name:"Viewtripincoming",params:e.tripdata})),e.$router.push({name:"Viewtripincoming",params:e.tripdata})}catch(t){}}))()},getTruckType(){this.vehicles.map(e=>{e.plateNo==this.plate&&(this.code=e.code,this.trucktype=e.vehicleType.code,this.body=e.vehicleNo)})},add(e){this.inputs.length<=4&&this.inputs.push({name:""})},remove(e){this.inputs.splice(e,1)}}},b=f,y=(a("60bc"),a("5a78"),a("3cf4"),a("2877")),C=Object(y["a"])(b,r,o,!1,null,"7fabd743",null);t["default"]=C.exports}}]);
//# sourceMappingURL=chunk-3b219f1e.3ea0cb96.js.map